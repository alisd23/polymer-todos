<link rel="import" href="../../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../../shared.style.html">
<link rel="import" href="./Form.style.html">

<dom-module id="form-component">
  <template>
    <style include="shared-styles"></style>
    <style include="form-styles"></style>

    <form class="form" on-submit="_onSubmit">
      <template is="dom-repeat" items="{{fields}}">
        <template is="dom-if" if="{{_isInput(item.type)}}">
          <input
            placeholder="[[item.placeholder]]"
            value="{{item.value::input}}"
            data-invalid$="[[_errorExists(item.error)]]"
            on-input="_clearErrors"
          />
        </template>
        <template is="dom-if" if="{{_isTextarea(item.type)}}">
          <textarea
            placeholder="[[item.placeholder]]"
            rows=2
            value="{{item.value::input}}"
            data-invalid$="[[_errorExists(item.error)]]">
          </textarea>
        </template>

        <template is="dom-if" if="{{item.error}}">
          <span class="form-error">
            {{item.error}}
          </span>
        </template>
      </template>

      <button
        class="form-submit"
        type="submit"
      >
        {{submitText}}
      </button>
    </form>
  </template>

  <script src="./Form.js"></script>
</dom-module>
